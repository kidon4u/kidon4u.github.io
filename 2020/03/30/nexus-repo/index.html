<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"><title>Nexus(Maven)仓库搭建和常见问题 | 啓東のblogs</title><meta name="description" content="Nexus(Maven)仓库搭建和常见问题"><meta name="keywords" content="maven"><meta name="author" content="Kidon"><meta name="copyright" content="Kidon"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon1.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Nexus(Maven)仓库搭建和常见问题"><meta name="twitter:description" content="Nexus(Maven)仓库搭建和常见问题"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><meta property="og:type" content="article"><meta property="og:title" content="Nexus(Maven)仓库搭建和常见问题"><meta property="og:url" content="https://kidon.fun/2020/03/30/nexus-repo/"><meta property="og:site_name" content="啓東のblogs"><meta property="og:description" content="Nexus(Maven)仓库搭建和常见问题"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'true'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="canonical" href="https://kidon.fun/2020/03/30/nexus-repo/"><link rel="next" title="CentOS 8防火墙firewalld配置、管理与实践" href="https://kidon.fun/2020/03/10/firewalld/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://kidon.fun/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: {"bookmark":{"title":"Snackbar.bookmark.title","message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"top-right"},
  baiduPush: true,
  isHome: false,
  isPost: true
  
}</script><meta name="generator" content="Hexo 4.2.0"></head><body><header> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">啓東のblogs</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/gallery/"><i class="fa-fw far fa-images"></i><span> Gallery</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div></div></span></div></header><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar1.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">4</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">2</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/gallery/"><i class="fa-fw far fa-images"></i><span> Gallery</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><div class="sidebar-toc__content"><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#概念"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">概念</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#组件-Components"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">组件(Components)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#资产-Assets"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">资产(Assets)</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#仓库-Repositories"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">仓库(Repositories)</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Nexus3安装"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">Nexus3安装</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#硬件准备"><span class="toc_mobile_items-number">2.1.</span> <span class="toc_mobile_items-text">硬件准备</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#安装"><span class="toc_mobile_items-number">2.2.</span> <span class="toc_mobile_items-text">安装</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Maven仓库配置和管理"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">Maven仓库配置和管理</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#了解私有仓库"><span class="toc_mobile_items-number">3.1.</span> <span class="toc_mobile_items-text">了解私有仓库</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Nexus上Maven仓库的配置-1"><span class="toc_mobile_items-number">3.2.</span> <span class="toc_mobile_items-text">Nexus上Maven仓库的配置^1</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#仓库类型"><span class="toc_mobile_items-number">3.2.1.</span> <span class="toc_mobile_items-text">仓库类型</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#创建仓库"><span class="toc_mobile_items-number">3.2.2.</span> <span class="toc_mobile_items-text">创建仓库</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#常用Maven仓库"><span class="toc_mobile_items-number">3.3.</span> <span class="toc_mobile_items-text">常用Maven仓库</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#浏览和查询"><span class="toc_mobile_items-number">3.4.</span> <span class="toc_mobile_items-text">浏览和查询</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#清理策略-cleanup-policy"><span class="toc_mobile_items-number">3.5.</span> <span class="toc_mobile_items-text">清理策略(cleanup policy)</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Maven项目里使用私有仓库"><span class="toc_mobile_items-number">4.</span> <span class="toc_mobile_items-text">Maven项目里使用私有仓库</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#项目发布至仓库"><span class="toc_mobile_items-number">4.1.</span> <span class="toc_mobile_items-text">项目发布至仓库</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Maven的Release版本与Snapshot版本"><span class="toc_mobile_items-number">4.2.</span> <span class="toc_mobile_items-text">Maven的Release版本与Snapshot版本</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#其他"><span class="toc_mobile_items-number">4.3.</span> <span class="toc_mobile_items-text">其他</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Q-amp-A"><span class="toc_mobile_items-number">5.</span> <span class="toc_mobile_items-text">Q &amp; A</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#结语"><span class="toc_mobile_items-number">6.</span> <span class="toc_mobile_items-text">结语</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#参考链接"><span class="toc_mobile_items-number">7.</span> <span class="toc_mobile_items-text">参考链接</span></a></li></ol></div></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#概念"><span class="toc-number">1.</span> <span class="toc-text">概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#组件-Components"><span class="toc-number">1.1.</span> <span class="toc-text">组件(Components)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#资产-Assets"><span class="toc-number">1.2.</span> <span class="toc-text">资产(Assets)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#仓库-Repositories"><span class="toc-number">1.3.</span> <span class="toc-text">仓库(Repositories)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Nexus3安装"><span class="toc-number">2.</span> <span class="toc-text">Nexus3安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#硬件准备"><span class="toc-number">2.1.</span> <span class="toc-text">硬件准备</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#安装"><span class="toc-number">2.2.</span> <span class="toc-text">安装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Maven仓库配置和管理"><span class="toc-number">3.</span> <span class="toc-text">Maven仓库配置和管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#了解私有仓库"><span class="toc-number">3.1.</span> <span class="toc-text">了解私有仓库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Nexus上Maven仓库的配置-1"><span class="toc-number">3.2.</span> <span class="toc-text">Nexus上Maven仓库的配置^1</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#仓库类型"><span class="toc-number">3.2.1.</span> <span class="toc-text">仓库类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#创建仓库"><span class="toc-number">3.2.2.</span> <span class="toc-text">创建仓库</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#常用Maven仓库"><span class="toc-number">3.3.</span> <span class="toc-text">常用Maven仓库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#浏览和查询"><span class="toc-number">3.4.</span> <span class="toc-text">浏览和查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#清理策略-cleanup-policy"><span class="toc-number">3.5.</span> <span class="toc-text">清理策略(cleanup policy)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Maven项目里使用私有仓库"><span class="toc-number">4.</span> <span class="toc-text">Maven项目里使用私有仓库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#项目发布至仓库"><span class="toc-number">4.1.</span> <span class="toc-text">项目发布至仓库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Maven的Release版本与Snapshot版本"><span class="toc-number">4.2.</span> <span class="toc-text">Maven的Release版本与Snapshot版本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#其他"><span class="toc-number">4.3.</span> <span class="toc-text">其他</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Q-amp-A"><span class="toc-number">5.</span> <span class="toc-text">Q &amp; A</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#结语"><span class="toc-number">6.</span> <span class="toc-text">结语</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考链接"><span class="toc-number">7.</span> <span class="toc-text">参考链接</span></a></li></ol></div></div></div><main id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png)"><div id="post-info"><div id="post-title"><div class="posttitle">Nexus(Maven)仓库搭建和常见问题</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 发表于 2020-03-30<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> 更新于 2020-03-31</time><div class="post-meta-wordcount"><div class="post-meta-pv-cv"><span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i>阅读量:</span><span id="busuanzi_value_page_pv"></span></div></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><blockquote>
<p>Nexus仓库管理器可用于maven/docker/npm/pypi/yum等相关组件的储存和管理，本文使用Docker + Nexus 3搭建仓库，并应用于maven项目</p>
</blockquote>
<h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p>只想着搭建Nexus仓库的朋友可以直接略过某些地方，比如这里。</p>
<h3 id="组件-Components"><a href="#组件-Components" class="headerlink" title="组件(Components)"></a>组件(Components)</h3><p>Nexus作为的多种构建工具仓库的管理器，不同工具的操作的对象不用，而在Nexus里统一称为<strong>组件</strong>。组件由<strong>坐标(coordinates)</strong>唯一确定，包括group，name和version。以Maven为例：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">xml</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>fun.kidon<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span> # 一般写开发团体</span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>my-project<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span> # 项目的名字</span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.1-RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span> # 版本</span><br></pre></td></tr></table></figure></div>

<p>以上三条信息在Maven中是必须的，通过它们就可以确定唯一组件(dependency或plugin)了，其中groupId和artifactId决定唯一的具体项目。</p>
<h3 id="资产-Assets"><a href="#资产-Assets" class="headerlink" title="资产(Assets)"></a>资产(Assets)</h3><p>与组件相关联的资源或是说文件，比如JAR组件中含有POM和JAR文件，甚至还有JavaDoc和源码文件。注意，资产并不只能是某组件独占的，它可以被共享，比如docker镜像的层，不同的镜像可以共享复用储存层。</p>
<h3 id="仓库-Repositories"><a href="#仓库-Repositories" class="headerlink" title="仓库(Repositories)"></a>仓库(Repositories)</h3><p>将某一类型的组件聚集起来就是仓库了，当然根据构建工具的差异，仓库格式和使用上也是不尽相同。</p>
<h2 id="Nexus3安装"><a href="#Nexus3安装" class="headerlink" title="Nexus3安装"></a>Nexus3安装</h2><h3 id="硬件准备"><a href="#硬件准备" class="headerlink" title="硬件准备"></a>硬件准备</h3><ol>
<li>CPU:推荐个数8+，最好不少于4个</li>
<li>内存：jvm分配2703MB~4GB，宿主机8GB+</li>
<li>为了允许进行虚拟内存交换，未分配的主机内存的最小值应该不低于总物理RAM的1/3</li>
<li>最大堆+最大直接内存&lt;=主机的内存 * 2/3</li>
<li>磁盘：根据具体使用而定，推荐300GB+</li>
</ol>
<p>上面的是推荐配置，并不是硬性要求，当然你总不希望突然某天就全线飙红吧，更多配置要求参考 <a href="https://help.sonatype.com/repomanager3/system-requirements" target="_blank" rel="noopener">https://help.sonatype.com/repomanager3/system-requirements</a></p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>这里使用docker安装</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker search nexus</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker pull sonatype/nexus3		<span class="comment"># 拉取nexus3镜像</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> mkdir -p -m 776 /usr/<span class="built_in">local</span>/nexus3/nexus-data</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker run -d -p 8081:8081 --name nexus -v /usr/<span class="built_in">local</span>/nexus3/nexus-data:/nexus-data --restart=always -e NEXUS_CONTEXT=nexus sonatype/nexus3		<span class="comment"># 运行容器，命名为nexus，如果容器运行在某些云平台加上--ulimit nofile=65536:65536 </span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker ps		<span class="comment"># 查看是否启动成功</span></span></span><br></pre></td></tr></table></figure></div>

<p>如果一切顺利，那么在浏览器中输入ip:8081/nexus就可以看到Nexus的界面了。如果无法访问看看Nexus是否启动成功或检查下防火墙设置。</p>
<p>本文主要是使用Nexus作为Maven仓库，后续可能会扩展其他类型的仓库，比如docker registry、npm registry等。</p>
<h2 id="Maven仓库配置和管理"><a href="#Maven仓库配置和管理" class="headerlink" title="Maven仓库配置和管理"></a>Maven仓库配置和管理</h2><p>Maven repository支持<strong>Apache Maven</strong>, Apache Ant/Ivy, Eclipse Aether, <strong>Gradle</strong>等。</p>
<h3 id="了解私有仓库"><a href="#了解私有仓库" class="headerlink" title="了解私有仓库"></a>了解私有仓库</h3><p>要让私有仓库为你服务怎么也得知道它是如何工作的吧。先来看个图片：</p>
<a href="/img/loading.gif" data-fancybox="group" data-caption="undefined" class="fancybox"><img style="zoom:70%" data-src="https://i.loli.net/2020/03/25/4h8P1zNgXWpoJcG.png" src="/img/loading.gif" class="lazyload"></a>

<p>这张图有几个简单的概念：本地仓库、私服、中央库。简单说本地仓库是你PC的某个目录；私服就是这里搭建的Nexus仓库；中央库是远程仓库之一。</p>
<p>我们会在Nexus仓库里面设置一些远程仓库的代理。查找依赖的流程是：如果本地仓库没有，则到私服寻找，如果私服也没有，它会到它代理的远程仓库里寻找（按照从上到下的优先级），找到后会在私服上储存一份，然后再下载到本地仓库。</p>
<p>而实际Maven的工作流程比这个可能要复杂，这个要看你具体的配置和使用了。</p>
<h3 id="Nexus上Maven仓库的配置-1"><a href="#Nexus上Maven仓库的配置-1" class="headerlink" title="Nexus上Maven仓库的配置^1"></a>Nexus上Maven仓库的配置<a href="https://help.sonatype.com/repomanager3/formats/maven-repositories" target="_blank" rel="noopener">^1</a></h3><p>用admin的账号登录之后，可以看到齿轮型的管理者按钮，点击它，出现的就是你能配置的所有东西了。</p>
<h4 id="仓库类型"><a href="#仓库类型" class="headerlink" title="仓库类型"></a>仓库类型</h4><a href="/img/loading.gif" data-fancybox="group" data-caption="undefined" class="fancybox"><img sytle="zoom:70%" data-src="https://i.loli.net/2020/03/25/8IjU5YoZxVD4lpt.png" src="/img/loading.gif" class="lazyload"></a>

<p>可以看到仓库这一栏，Nexus默认为你配置了几个仓库，如果你感觉没用的可以删除。这里解释下仓库的类型：</p>
<ul>
<li>proxy:所代理的远程仓库，上面有介绍。</li>
<li>hosted:就是安装Nexus的宿主机上的仓库，类型有Release/Snapshot/Mixed，以后你上传的组件就放在hosted类型的仓库中，外部无法获取</li>
<li>group:可以包含其它仓库或者仓库组，通过一个url统一对外服务</li>
</ul>
<h4 id="创建仓库"><a href="#创建仓库" class="headerlink" title="创建仓库"></a>创建仓库</h4><p>点击上图那个创建仓库的按钮，我们创建一个代理仓库：<a href="/img/loading.gif" data-fancybox="group" data-caption="undefined" class="fancybox"><img style="zoom:70%" data-src="https://i.loli.net/2020/03/26/NPmLEae4blByOtX.png" src="/img/loading.gif" class="lazyload"></a></p>
<p>填入代理仓库三个主要的信息，还有其他的配置看说明即可明白，一般采用默认值即可：</p>
<a href="/img/loading.gif" data-fancybox="group" data-caption="undefined" class="fancybox"><img style="zoom:70%" data-src="https://i.loli.net/2020/03/26/mRzdXh3F4xLsiUS.png" src="/img/loading.gif" class="lazyload"></a>

<p>点击最下方的创建按钮，即完成仓库的创建。</p>
<p>回到仓库页面，点击仓库组，即那个maven-public，然后把阿里云的maven代理移动到右边，并且往上移动，保存离开。<strong>依赖查询的顺序是根据从上到下的顺序进行的</strong>：</p>
<a href="/img/loading.gif" data-fancybox="group" data-caption="undefined" class="fancybox"><img style="zoom:70%" data-src="https://i.loli.net/2020/03/26/NeLDRV3Aqpbnxsd.png" src="/img/loading.gif" class="lazyload"></a>

<p>稍后我会介绍如何在Maven项目中使用此私服仓库。</p>
<h3 id="常用Maven仓库"><a href="#常用Maven仓库" class="headerlink" title="常用Maven仓库"></a>常用Maven仓库</h3><table>
<thead>
<tr>
<th>仓库</th>
<th>url</th>
</tr>
</thead>
<tbody><tr>
<td>阿里云</td>
<td><a href="http://maven.aliyun.com/nexus/content/groups/public/" target="_blank" rel="noopener">http://maven.aliyun.com/nexus/content/groups/public/</a></td>
</tr>
<tr>
<td>camunda</td>
<td><a href="https://app.camunda.com/nexus/content/groups/public" target="_blank" rel="noopener">https://app.camunda.com/nexus/content/groups/public</a></td>
</tr>
<tr>
<td>spring.io</td>
<td><a href="http://repo.spring.io/release/" target="_blank" rel="noopener">http://repo.spring.io/release/</a></td>
</tr>
<tr>
<td>ibiblio</td>
<td><a href="http://www.ibiblio.org/maven2" target="_blank" rel="noopener">http://www.ibiblio.org/maven2</a></td>
</tr>
<tr>
<td>jboss</td>
<td><a href="http://repository.jboss.com/maven2/" target="_blank" rel="noopener">http://repository.jboss.com/maven2/</a></td>
</tr>
</tbody></table>
<p>其实，国内maven镜像虽然快，但是更新比较慢，国外的仓库由于国内网络的原因，下载简直不能忍，但是更新很快，可以根据自身的情况选择，有些人会花些钱开代理访问外网比较快，建议使用原装。</p>
<h3 id="浏览和查询"><a href="#浏览和查询" class="headerlink" title="浏览和查询"></a>浏览和查询</h3><p>这里写这个主要是想表明Nexus确实给我们提供了很方便的查询组件信息的方法，以后你开发的组件在这都可以看到。如果你仓库里还没有组件，那么接着往下小节看吧。</p>
<p>在这个页面主要是供用户浏览、查询或者上传组件，你可以在这页尽情探索：</p>
<a href="/img/loading.gif" data-fancybox="group" data-caption="undefined" class="fancybox"><img style="zoom:70%" data-src="https://i.loli.net/2020/03/25/SAKYQfp4JecXodu.png" src="/img/loading.gif" class="lazyload"></a>

<p>可以看见组件所具有的资产(assets)和他们的信息及使用方法：</p>
<a href="/img/loading.gif" data-fancybox="group" data-caption="undefined" class="fancybox"><img style="zoom:70%" data-src="https://i.loli.net/2020/03/25/d2BscCYvRfLM7ol.png" src="/img/loading.gif" class="lazyload"></a>

<p>如果通过restful api设置了tag也能看见：</p>
<a href="/img/loading.gif" data-fancybox="group" data-caption="undefined" class="fancybox"><img style="zoom:70%" data-src="https://i.loli.net/2020/03/25/DR35OeJmiyLQV7g.png" src="/img/loading.gif" class="lazyload"></a>

<h3 id="清理策略-cleanup-policy"><a href="#清理策略-cleanup-policy" class="headerlink" title="清理策略(cleanup policy)"></a>清理策略(cleanup policy)</h3><p>最好是能设置自己的组件清理策略，以免不再使用的组件占据磁盘空间进而引发问题。<a href="https://help.sonatype.com/repomanager3/cleanup-policies" target="_blank" rel="noopener">戳我查看清理策略</a>。</p>
<h2 id="Maven项目里使用私有仓库"><a href="#Maven项目里使用私有仓库" class="headerlink" title="Maven项目里使用私有仓库"></a>Maven项目里使用私有仓库</h2><p>在项目中配置Maven仓库，主要有两种方式：一种是在Maven的<code>settings.xml</code>里配置（全局或用户级），这样每个项目都能共享此配置；一种是在每个项目里的<code>pom.xml</code>中单独配置。这里在settings.xml里配置：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">xml</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">settings</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/SETTINGS/1.0.0"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">localRepository</span>&gt;</span>D:\repository<span class="tag">&lt;/<span class="name">localRepository</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">servers</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">server</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">username</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">username</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">password</span>&gt;</span>admin123<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servers</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">mirrors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyun-maven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mirrors</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">  <span class="tag">&lt;<span class="name">profiles</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">profile</span>&gt;</span>  </span><br><span class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>env-dev<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://192.168.204.128:8081/nexus/repository/maven-public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">releases</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">releases</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">updatePolicy</span>&gt;</span>always<span class="tag">&lt;/<span class="name">updatePolicy</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">pluginRepositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">pluginRepository</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://192.168.204.128:8081/nexus/repository/maven-public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">releases</span>&gt;</span><span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span><span class="tag">&lt;/<span class="name">releases</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span><span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span><span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">pluginRepository</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">pluginRepositories</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">profiles</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!--make the profile active all the time --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">activeProfiles</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">activeProfile</span>&gt;</span>env-dev<span class="tag">&lt;/<span class="name">activeProfile</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">activeProfiles</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p><code>settings.xml</code>里每一项都都有简略的英文注释，不太多，可以好好看看。这里解释其中的几个：</p>
<ul>
<li><code>&lt;server/&gt;</code> 是提供给你的私服的认证信息的，这个在发布的时候需要使用，我们下面发布的时候会提到。注意，认证信息这里我们由于省事写了admin的账号，但是最好能分配一个开发者账号，Nexus提供了丰富的账号权限管理能力。</li>
<li><code>&lt;mirrors/&gt;</code> 简单说来就是某个远程仓库的镜像，这里其实可以不用写这配置，不过为了说明还是列出来了。<strong>注意:镜像的工作方式类似于拦截器，当远程仓库被镜像匹配到的(<code>&lt;mirrorOf/&gt;</code>)，请求被重定向到镜像仓库，获取 jar 包将从镜像仓库获取，而不是我们配置的repository仓库，repository将失去作用</strong>。</li>
<li><code>&lt;profiles/&gt;</code> 在这里我们可以为不同环境定制构建方式，我们的私有仓库就配置在这里，其中的仓库的<code>&lt;url/&gt;</code>就是Nexus的仓库组，还说明了此仓库用于release和snapshot版本。它的激活方式也是十分丰富，这里只用了其中一种，建议好好了解关于此配置项的内容，在多环境、CI/CD中会有作用。</li>
</ul>
<p>以上配置完成，清理你本地仓库里的组件，重新导入一次依赖，就能看见依赖都是从私有仓库导入的了，同时登陆私有仓库，也能在上面看见仓库里缓存了这些组件。下载完成，该说说上传了。</p>
<h3 id="项目发布至仓库"><a href="#项目发布至仓库" class="headerlink" title="项目发布至仓库"></a>项目发布至仓库</h3><p>在项目的<code>pom.xml</code>中加入发布和快照仓库的信息：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">xml</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">distributionManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>Releases<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://192.168.204.128:8081/nexus/repository/maven-releases/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">snapshotRepository</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>Snapshot<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://192.168.204.128:8081/nexus/repository/maven-snapshots/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">snapshotRepository</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">distributionManagement</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></div>

<p>这里的neuxs作为id，同<code>settings.xml</code>里的<code>&lt;server/&gt;</code>id要一致，用户信息只能放在<code>settings.xml</code>中，用于提供认证。在Maven的deploy阶段，就能把项目发布到对应的仓库了。</p>
<p>执行<code>mvn clean deploy</code>，再到仓库里看看，我们的快照版本确实发布到了快照仓库了，这样你小伙伴的其他的项目就能通过坐标引用这个组件了：</p>
<a href="/img/loading.gif" data-fancybox="group" data-caption="undefined" class="fancybox"><img style="zoom:70%" data-src="https://i.loli.net/2020/03/30/fk6DHuKb5GOUF3J.png" src="/img/loading.gif" class="lazyload"></a>

<p>那接下来简单说说Maven的发布和快照版本。</p>
<h3 id="Maven的Release版本与Snapshot版本"><a href="#Maven的Release版本与Snapshot版本" class="headerlink" title="Maven的Release版本与Snapshot版本"></a>Maven的Release版本与Snapshot版本</h3><ul>
<li><p>Release（发布）代表可靠、稳定、不再改变的版本</p>
</li>
<li><p>Snapshot（快照）代表不稳定、尚处于开发中、随时可变的版本。</p>
</li>
</ul>
<p>区分快照版本和发布版本只要看是否以<code>-SNAPSHOT</code>为结尾，注意这里要全大写。</p>
<p>由于发布和快照版本的特性，在我们的POM文件中，如果某依赖项是发布版本，若本地仓库已有就不会再去远程仓库下载；而如果是快照版本，那么即使本地仓库已有该版本，也会下载远程仓库里的来更新本地的。</p>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>Maven仓库实际上储存的文件是没有限制的，你可以储存WAR、JAR、源码、Ruby libraries等。Maven仓库中组件通过POM阐述。当Maven下载一个组件(dependency or plugin)时，对应组件的POM文件也会被下载，所有记录在此POM的组件也将被下载，如此反复，直到下载完所有依赖的组件。</p>
<p>有个小技巧，Maven是通过url使用http来下载的，比如从仓库下载fun.kidon开发的my-project项目的1.2.1-RELEASE版本那么url为：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.../fun/kidon/my-project/1.2.1-RELEASE.jar</span><br></pre></td></tr></table></figure></div>

<p>同时POM文件也会被下载下来：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.../fun/kidon/my-project/1.2.1-RELEASE.pom</span><br></pre></td></tr></table></figure></div>



<h2 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q &amp; A"></a>Q &amp; A</h2><ol>
<li><p>centos8中docker容器内dns无法工作？</p>
<p>这个是firewalld的问题，启用ip地址伪装就可以正常工作：</p>
<div class="code-area-wrap"><div class="highlight-tools"><i class="fa fa-angle-down code-expand" aria-hidden="true"></i><div class="code_lang">shell</div><div class="copy-notice"></div><i class="fa fa-clipboard" aria-hidden="true"></i></div><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> firewall-cmd --zone=public --add-masquerade --permanent</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> firewall-cmd --reload</span></span><br></pre></td></tr></table></figure></div>

<p>更多的firewalld设置可以查看<a href="/2020/03/10/firewalld/">这里</a>。</p>
</li>
</ol>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>Nexus仓库确实提供了很多丰富强大的功能，有很多这里并未涉及，比如restful api、定时任务、权限管理等。我们创建了Maven仓库并在项目中使用了它。除了组件管理，在未来Nexus仓库结合构建工具(Apache Maven等)可作为CI/CD中重要的一环参与生产实践，到时候就能扩大其价值了。之后应该还会涉及几个议题。</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a href="https://help.sonatype.com/repomanager3" target="_blank" rel="noopener">https://help.sonatype.com/repomanager3</a></p>
<p><a href="http://maven.apache.org/guides/mini/guide-mirror-settings.html" target="_blank" rel="noopener">http://maven.apache.org/guides/mini/guide-mirror-settings.html</a></p>
<p><a href="https://www.xncoding.com/2017/09/02/tool/nexus.html" target="_blank" rel="noopener">https://www.xncoding.com/2017/09/02/tool/nexus.html</a></p>
<p><a href="https://www.javatt.com/p/87942" target="_blank" rel="noopener">https://www.javatt.com/p/87942</a></p>
<p><a href="https://www.jianshu.com/p/94b060e016a2" target="_blank" rel="noopener">https://www.jianshu.com/p/94b060e016a2</a></p>
<p><a href="https://swenfang.github.io/2018/06/03/Maven-Priority/" target="_blank" rel="noopener">https://swenfang.github.io/2018/06/03/Maven-Priority/</a></p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Kidon</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://kidon.fun/2020/03/30/nexus-repo/">https://kidon.fun/2020/03/30/nexus-repo/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://kidon.fun">啓東のblogs</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/maven/">maven    </a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="next-post pull-full"><a href="/2020/03/10/firewalld/"><img class="next_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>CentOS 8防火墙firewalld配置、管理与实践</span></div></a></div></nav></div></main><footer id="footer" style="background-image: url(https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/top_img/default.png)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2020 By Kidon</div><div class="framework-info"><span>驱动 </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script id="ribbon_piao" mobile="false" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/piao.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/gh/jerryc127/butterfly_cdn@2.1.0/js/canvas-nest.js"></script><script src="https://cdn.jsdelivr.net/npm/activate-power-mode/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = false;
POWERMODE.shake = true; 
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script></body></html>